<h2>Frage</h2>
<div>Problem: Bestimmte Geschäftspartner-Datensätze aus PDS (CSS) werden über die Synchronisation nicht bereitgestellt.<br /><br />Ursache: Die Ansprechpartneranrede_id war nicht gefüllt. Das ist aber vereinbarte Voraussetzung. Denn ohne diesen Filter würden alle Firmen mehrfach aufgeführt werden.<br /><br />Über die Änderung der Where Bedingung der Paritstamm-View konnte die Ursache ermittelt werden:<br />where <br />	pk.kontonummer = fehlende Kundennummer<br />	--and LEN(pd.anschriftanrede_id) &gt; 0 -- Ohne diese Einschränkung wird der Datensatz angezeigt<br /><br />Die Lösung war also das Umschalten des Datensatzes in PDS von Privatperson auf Firma oder wäre bei Privatpersonen das Hinzufügen der Anrede in PDS gewesen. <br /><br /><strong>Es ist keine Änderung in topfact notwendig.</strong><br /><br /></div>
<p></p>
<h2>Antwort / Lösung</h2>Select / View zur Prüfung: <strong>Die pd.anschriftanrede_id muss gefüllt sein!</strong><br /><br />SELECT DISTINCT <br />    pd.anschriftanrede_id<br />	,CAST(pk.kontonummer AS Varchar) AS Ku_Lie_Nr, (CONCAT(ISNULL(pd.name1, &#39;&#39;), CASE WHEN LEN(ISNULL(pd.name2, &#39;&#39;)) = 0 THEN &#39;&#39; ELSE &#39; &#39; END, <br />    ISNULL(pd.name2, &#39;&#39;))) AS Name_001, UPPER(CONCAT(ISNULL(pd.name1, &#39;&#39;), CASE WHEN LEN(ISNULL(pd.name2, &#39;&#39;)) = 0 THEN &#39;&#39; ELSE &#39; &#39; END, <br />    ISNULL(pd.name2, &#39;&#39;)) ) AS Suchwort, ISNULL(pd.name2, &#39;&#39;) AS Name_002, a.ort, a.plz, CONCAT(a.strasse, &#39; &#39;, CAST(a.hausnummer AS Varchar)) AS Strasse, NULL <br />    AS Telefonnr, NULL AS Faxnummer, k.email, sk.kontonummer AS Gegenkto, a.name3 AS Name_003, a.name4 AS Name_004, NULL AS Druckversion, NULL <br />    AS Emailversand, NULL AS Faxversand, NULL AS Ansprechpartner, NULL AS AnschreibenText, NULL AS Sortierung, NULL AS DeckblattText, NULL <br />    AS Deckblatt_erstellen, NULL AS Empfaenger, bv.iban, rc.netto_tage AS Nettofälligkeit, NULL AS Skontofaelligkeit, REPLACE(ISNULL(rc.ziel1_skonto_proz, &#39;&#39;), N&#39;.&#39;, <br />    N&#39;&#39;) AS Skonto_Prozent, pk.zahlart_nr AS Zahlart, (CASE WHEN rc.ziel1_fester_tag &gt; 0 THEN rc.ziel1_fester_tag ELSE rc.ziel1_tage END) AS Skontofälligkeit, NULL <br />    AS Expr1, NULL AS Skontoproz, &#39;Heil&#39; AS Mandant<br />FROM<br />	dbo.personenkonto AS pk<br />	INNER JOIN dbo.personendaten AS pd ON pd.parent_id = pk.geschpartner_id COLLATE SQL_Latin1_General_Cp1_CS_AS<br />	INNER JOIN dbo.kontakt AS k ON k.geschpartner_id = pk.geschpartner_id COLLATE SQL_Latin1_General_Cp1_CS_AS<br />	LEFT JOIN dbo.anschrift AS a ON a.anschrift_id = k.anschrift_id COLLATE SQL_Latin1_General_Cp1_CS_AS<br />	LEFT OUTER JOIN dbo.f_pk_sk_zuord as pk_sk on pk_sk.personenkonto_id = pk.personenkonto_id COLLATE SQL_Latin1_General_Cp1_CS_AS<br />	LEFT OUTER JOIN dbo.bankverbindung AS bv ON bv.geschaeftsp_id = pk.geschpartner_id COLLATE SQL_Latin1_General_Cp1_CS_AS<br />	LEFT OUTER JOIN dbo.rchkondguelt AS rc ON rc.rechkondition_id = pk.rechkondition_id COLLATE SQL_Latin1_General_Cp1_CS_AS<br />	LEFT OUTER JOIN dbo.sachkonto AS sk ON sk.sachkonto_id = pk_sk.sachkonto_id COLLATE SQL_Latin1_General_Cp1_CS_AS<br />where <br />	pk.kontonummer = fehlende Kundennummer<br />	--and LEN(pd.anschriftanrede_id) &gt; 0