{
  "PageID": 17475,
  "PageGuid": "c203862f-08d9-4b8f-a9c7-024e6950478c",
  "Title": "Einzelne Firmendatensätze werden nicht  aus PDS (CSS) synchronisiert",
  "Content": "Frage\r\nProblem: Bestimmte Geschäftspartner-Datensätze aus PDS (CSS) werden über die Synchronisation nicht bereitgestellt.\r\n\r\nUrsache: Die Ansprechpartneranrede_id war nicht gefüllt. Das ist aber vereinbarte Voraussetzung. Denn ohne diesen Filter würden alle Firmen mehrfach aufgeführt werden.\r\n\r\nÜber die Änderung der Where Bedingung der Paritstamm-View konnte die Ursache ermittelt werden:\r\nwhere \r\npk.kontonummer = fehlende Kundennummer\r\n--and LEN(pd.anschriftanrede_id) > 0 -- Ohne diese Einschränkung wird der Datensatz angezeigt\r\n\r\nDie Lösung war also das Umschalten des Datensatzes in PDS von Privatperson auf Firma oder wäre bei Privatpersonen das Hinzufügen der Anrede in PDS gewesen. \r\n\r\nEs ist keine Änderung in topfact notwendig.\r\nAntwort / Lösung\r\nSelect / View zur Prüfung: Die pd.anschriftanrede_id muss gefüllt sein!\r\n\r\nSELECT DISTINCT \r\npd.anschriftanrede_id\r\n,CAST(pk.kontonummer AS Varchar) AS Ku_Lie_Nr, (CONCAT(ISNULL(pd.name1, ''), CASE WHEN LEN(ISNULL(pd.name2, '')) = 0 THEN '' ELSE ' ' END, \r\nISNULL(pd.name2, ''))) AS Name_001, UPPER(CONCAT(ISNULL(pd.name1, ''), CASE WHEN LEN(ISNULL(pd.name2, '')) = 0 THEN '' ELSE ' ' END, \r\nISNULL(pd.name2, '')) ) AS Suchwort, ISNULL(pd.name2, '') AS Name_002, a.ort, a.plz, CONCAT(a.strasse, ' ', CAST(a.hausnummer AS Varchar)) AS Strasse, NULL \r\nAS Telefonnr, NULL AS Faxnummer, k.email, sk.kontonummer AS Gegenkto, a.name3 AS Name_003, a.name4 AS Name_004, NULL AS Druckversion, NULL \r\nAS Emailversand, NULL AS Faxversand, NULL AS Ansprechpartner, NULL AS AnschreibenText, NULL AS Sortierung, NULL AS DeckblattText, NULL \r\nAS Deckblatt_erstellen, NULL AS Empfaenger, bv.iban, rc.netto_tage AS Nettofälligkeit, NULL AS Skontofaelligkeit, REPLACE(ISNULL(rc.ziel1_skonto_proz, ''), N'.', \r\nN'') AS Skonto_Prozent, pk.zahlart_nr AS Zahlart, (CASE WHEN rc.ziel1_fester_tag > 0 THEN rc.ziel1_fester_tag ELSE rc.ziel1_tage END) AS Skontofälligkeit, NULL \r\nAS Expr1, NULL AS Skontoproz, 'Heil' AS Mandant\r\nFROM\r\ndbo.personenkonto AS pk\r\nINNER JOIN dbo.personendaten AS pd ON pd.parent_id = pk.geschpartner_id COLLATE SQL_Latin1_General_Cp1_CS_AS\r\nINNER JOIN dbo.kontakt AS k ON k.geschpartner_id = pk.geschpartner_id COLLATE SQL_Latin1_General_Cp1_CS_AS\r\nLEFT JOIN dbo.anschrift AS a ON a.anschrift_id = k.anschrift_id COLLATE SQL_Latin1_General_Cp1_CS_AS\r\nLEFT OUTER JOIN dbo.f_pk_sk_zuord as pk_sk on pk_sk.personenkonto_id = pk.personenkonto_id COLLATE SQL_Latin1_General_Cp1_CS_AS\r\nLEFT OUTER JOIN dbo.bankverbindung AS bv ON bv.geschaeftsp_id = pk.geschpartner_id COLLATE SQL_Latin1_General_Cp1_CS_AS\r\nLEFT OUTER JOIN dbo.rchkondguelt AS rc ON rc.rechkondition_id = pk.rechkondition_id COLLATE SQL_Latin1_General_Cp1_CS_AS\r\nLEFT OUTER JOIN dbo.sachkonto AS sk ON sk.sachkonto_id = pk_sk.sachkonto_id COLLATE SQL_Latin1_General_Cp1_CS_AS\r\nwhere \r\npk.kontonummer = fehlende Kundennummer\r\n--and LEN(pd.anschriftanrede_id) > 0",
  "Url": "https://services.topfact.de/wiki/pages/view?g=c203862f-08d9-4b8f-a9c7-024e6950478c"
}