{
  "PageID": 36317,
  "PageGuid": "0cd477d6-470d-4333-854a-2ed55b4eb150",
  "Title": "topfact Archiv Webhooks & Events",
  "Content": "topfact Archiv Webhooks & Events\r\n\r\nDie API des topfact Archivs bietet die Möglichkeit in externen Systemen auf die Events im Archiv benachrichtigt zu werden. Dazu werden so genannte Webhooks verwendet. Dies sind HTTP Adressen die vom Archiv per POST Request bei einem Event angesprochen werden.\r\n\r\nEinrichtung eines topfact Archiv Webhooks\r\nUm einen Webhook einzurichten muss in der Administration des Archivs unter \"Webhooks\" ein neuer Eintrag erfolgen.\r\n·HTTP Webhook URL: Ziel URL die aufgerufen werden soll. Hier wird die Information des Events als JSON übermittelt\r\n·Archiv Ereignis: Auswahl zwischen \"neues Dokument\", \"neue Datei\", \"Dokument geändert\"\r\n·HTTP Header: falls der Endpunkt eine Verschlüsselung oder einen API KEY benötigt kann dieser im Header eingetragen werden\r\n\r\n\r\n\r\nVerarbeitung eines Archiv-Events im Webhook\r\nEvent: Neues Dokument\r\nSobald im Archiv ein neues Dokument abgelegt wird, erhält der HTTP Endpunkt des Webhooks einen neuen POST Request mit folgendem Inhalt: \r\n> Das neu archivierte Dokumenten-Objekt, inklusive Indexdaten der Felder und den Dateiinformationen\r\n[\r\n{\r\n     \"ArchivGuid\": \"xxx-xxx-xxx-xxx-xxx\",\r\n     \"DocId\": 12345,\r\n     \"DocGuid\": \"xxx-xxx-xxx-xxx-xxx\",\r\n     \"SystemFields\": {\r\n     \"tf_DocId\": 12345,\r\n     \"tf_DateCreated\": \"2024-03-18T12:58:49.41\",\r\n     \"tf_UserCreated\": \"user@topfact.de\",\r\n     \"tf_DateModified\": null,\r\n     \"tf_UserModified\": null,\r\n     \"tf_DateLastAccess\": null,\r\n     \"tf_UserLastAccess\": null,\r\n     \"tf_FileCount\": 1,\r\n     \"tf_FileSize\": 43004,\r\n     \"tf_Locked\": false\r\n},\r\n\"ArchiveFiles\": [\r\n{\r\n     \"ArchiveId\": 1,\r\n     \"ArchiveGuid\": null,\r\n     \"DocId\": 7890,\r\n     \"DocGuid\": null,\r\n     \"FileId\": 1234,\r\n     \"FileGuid\": \"xx-xx-xx-xx-xx\",\r\n     \"StorageId\": 27,\r\n     \"Filename\": \"Beispielbeleg topfact 123.pdf\",\r\n     \"Fileextension\": \".pdf\",\r\n     \"Filelength\": 43004,\r\n     \"Filebinary\": null,\r\n     \"Visible\": true,\r\n     \"Position\": 1,\r\n     \"ImageStatus\": 0,\r\n     \"FulltextStatus\": 0,\r\n     \"PageCount\": 0,\r\n     \"MD5Hash\": \"xxxx\",\r\n     \"MD5Key\": null,\r\n     \"DateCreated\": \"2024-03-18T12:58:49.41\",\r\n     \"UserCreated\": \"Patric.user@topfact.de\",\r\n     \"DateModified\": null,\r\n     \"UserModified\": null\r\n}\r\n]\r\n}\r\n]",
  "Url": "https://services.topfact.de/wiki/pages/view?g=0cd477d6-470d-4333-854a-2ed55b4eb150"
}