{
  "PageID": 17087,
  "PageGuid": "b90f04e3-415c-4c5c-9a23-471b08160e3b",
  "Title": "MySQL Skript zur Performance-Verbesserung - > Tägliche Übertragung von Daten aus einer View an eine Tabelle",
  "Content": "Detlev Eberhardt 27.05.2019 verwendet bei Kramer & Best\r\n\r\n\r\nDROP VIEW IF EXISTS topfact.css_paritystamm;\r\nCREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=admin@localhost SQL SECURITY DEFINER VIEW topfact.css_paritystamm AS \r\nselect\r\npk.kontonummer AS Ku_Lie_NR,\r\nconcat(pd.name1,_utf8' ',ifnull(pd.name2,_utf8'')) AS Name_001,\r\nconcat(pd.name1,_utf8' ',ifnull(pd.name2,_utf8'')) AS Suchwort,\r\npd.name2 AS Name_002,\r\nifnull(a.ort,_utf8'') AS Ort,\r\na.plz AS Plz,\r\nconcat(a.strasse,_utf8' ',cast(a.hausnummer as char(10) charset utf8)) AS Strasse,\r\nNULL AS Ansprechpartner,\r\npk.Mandant AS Mandant,\r\nNULL AS Telefonnr,\r\nNULL AS Faxnummer,\r\nNULL AS Email,\r\na.name3 AS Name_003,\r\na.name4 AS Name_004,\r\nNULL AS gegenkto,\r\nNULL AS Druckversion,\r\nNULL AS Emailversand,\r\nNULL AS Faxversand,\r\nconcat(pk.kontonummer,' ', pd.name1,_utf8' ',ifnull(pd.name2,_utf8' '), ifnull(a.ort,_utf8' '),' ', ifnull(a.plz,''), ' ', ifnull(a.strasse,' '),_utf8' ',' ',cast(ifnull(a.hausnummer,'') as char(10) charset utf8) ) as Auswahl,\r\nfrom (((topfact.css_personendaten pd join topfact.css_pds_personenkonto pk on((pd.parent_id = pk.geschpartner_id))) join topfact.css_kontakt k on((k.geschpartner_id = pk.geschpartner_id))) join topfact.css_anschrift a on((a.anschrift_id = k.anschrift_id)));\r\n\r\n\r\ntägliche Übernahme der Adressdaten aus der View in eine performante Tabelle. Abwicklung über die Aufgabenplanung:\r\nset sql_big_selects=1;\r\n\r\n\r\ndelete from paritystamm;\r\n\r\n\r\n\r\n\r\ninsert into paritystamm\r\n\r\n\r\n\r\nselect * from css_paritystamm;\r\n\r\nAusgeführt wird das Script über diesen Aufruf: D:\\Scripts\\StartFuelParitystamm.bat\r\nmit diesem Inhalt\r\nE:\\MySQL\\bin\\mysql -u admin -pntba@1 topfact < \"D:\\Scripts\\FuelParitystamm.sql\" > \"D:\\Scripts\\FuelParitystamm.txt\"",
  "Url": "https://services.topfact.de/wiki/pages/view?g=b90f04e3-415c-4c5c-9a23-471b08160e3b"
}